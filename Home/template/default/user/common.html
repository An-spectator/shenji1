{if(!$islogin)}
<a href="#member-login" data-toggle="modal" data-target="#member-login">会员登录</a>
{/if}
<!--end-->
<div class="footer-dark py-0">
	<footer>
		<p class="py-4 mb-0 bg-dark text-white text-center">{$webconf['web_beian']} {$webconf['web_copyright']} All Rights Reserved</p>
	</footer>
</div>


{include="user/uploadimg"}
<!-- login modal-->
<div class="modal fade bd-example-modal-sm" id="member-login" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="myModalLabel">会员登录</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form class="was-validated">
				<input name="go" value="1" type="hidden" />
				<input name="ischeck" id="ischeck" value="0" type="hidden" />
					<div class="form-group mb-4 pt-3">
						<label for="username">请输入账号</label>
						<div class="input-group">
							<div class="input-group-prepend">
								<div class="input-group-text">账号</div>
							</div>
							<input type="text" class="form-control" id="username" name="username" placeholder="手机号或者邮箱" required autocomplete="off">
						</div>
					</div>
					<div class="form-group">
						<label for="password">请输入密码</label>
						<div class="input-group">
							<div class="input-group-prepend">
								<div class="input-group-text">密码</div>
							</div>
							<input type="password" class="form-control" id="password" name="password" placeholder="********" required autocomplete="off">
						</div>
					</div>
					
					<div class="form-group">
						<label for="vercode">输入验证码</label>
						<div class="input-group">
							<div class="form-control p-0"><img src="{fun U('Common/vercode')}"></div>
							<input type="text" class="form-control ml-3" id="vercode" name="vercode" required autocomplete="off">
						</div>
					</div>
					<div class="form-group">
						<div class="custom-control custom-switch">
							<input class="custom-control-input" type="checkbox" id="f-option" name="selector">
							<label class="custom-control-label" for="f-option">记住账号</label>
							<div class="check"></div>
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer d-block">
				<div class="form-group">
					<a class="btn btn-primary rounded btn-block" href="javascript:;">会员登录</a>
					<p class="mt-3"><i class="fa fa-exclamation-triangle text-warning mr-1"></i>还不是会员吗？『 <a href="{fun U('Login/register')}">注册成为会员</a>』</p>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	function login(){
		var username = $.trim($("#username").val());
		var password = $.trim($("#password").val());
		var vercode = $.trim($("#vercode").val());
		if(username==''){
			alert('账号不能为空！');$("#username").focus();return false;
		}
		if(password==''){
			alert('密码不能为空！');$("#username").focus();return false;
		}
		if(vercode==''){
			alert('验证码不能为空！');$("#username").focus();return false;
		}
		$.ajax({
			url:"{fun U('Login/index')}",//请求的url地址
		 dataType:"json",//返回格式为json
		 async:true,//请求是否异步，默认为异步，这也是ajax重要特性
		 data:{username:username,password:password,vercode:vercode,ajax:1,iscode:1},//参数值
		 type:"POST",//请求方式
		 beforeSend:function(){
		//请求前的处理
		},
		 success:function(r){
		//请求成功时处理
				if(r.code==0){
					window.location.reload();
				}else{
					alert(r.msg);
					return false;
				}
		},
		 complete:function(){
		//请求完成的处理
		},
		 error:function(){
		//请求出错处理
				alert('网络异常');
		}

			
			
		})
	}
</script>